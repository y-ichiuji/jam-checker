# Jam Checker - 交通量表示アプリケーション開発指示書

このドキュメントは、Jam Checkerアプリケーション開発におけるGitHub Copilotへの指示を含んでいます。このプロジェクトでは、時間帯別の交通量をマップ上に視覚的に表示する機能を提供します。

## プロジェクト概要

- **名前**: Jam Checker
- **目的**: 異なる時間帯の交通混雑状況をマップ上に視覚的に表示し、ユーザーが効率的な移動計画を立てられるよう支援する
- **使用技術**: Angular 19, TypeScript, RxJS, HTML, SCSS
- **コード品質管理**: ESLint, Prettier
- **プロジェクト管理**: GitHub

## 技術仕様

### フロントエンド

- **フレームワーク**: Angular 19
- **状態管理**: Angular Signal
- **スタイリング**: SCSS
- **コンポーネント設計**:
  - 機能ごとに独立したモジュール化されたコンポーネント
  - Presentational/Container パターンの採用
  - Angular 19のスタンドアロンコンポーネント機能を活用
- **レスポンシブデザイン**: モバイル、タブレット、デスクトップに対応（モバイルファースト）

### コーディング規約

- **TypeScript**: 最新の機能と型定義を最大限に活用
- **コンポーネント命名**: PascalCase (例: `TrafficMapComponent`)
- **サービス命名**: PascalCase + 'Service' (例: `TrafficDataService`)
- **インターフェース命名**: PascalCase + 'I' プレフィックス (例: `ITrafficData`)
- **ファイル命名**: kebab-case (例: `traffic-map.component.ts`)
- **CSS クラス命名**: BEM方式を採用
- **非同期処理**: Signalを基本とし、必要に応じてRxJSを補助的に使用
- **コメント**: JSDocスタイルのコメントを推奨

### コード品質

- **ESLint**: プロジェクト定義のルールに従う
- **Prettier**: コードフォーマットの自動適用
- **テスト**: Jasmine/Karma を使用した単体テスト
- **カバレッジ**: 最低80%のコードカバレッジを目標

## プロジェクト構造

```
src/
|-- app/
|   |-- core/              # コアモジュール（インターセプター、ガード、ディレクティブ、パイプ）
|   |-- store/             # グローバルな状態管理（Signal）
|   |-- components/        # 共有コンポーネント
|   |-- pages/             # ページコンポーネント
|       |-- hoge/          # hoge機能ページ
|           |-- components/      # ページ固有のUIコンポーネント
|               |-- hoge-view/   # Presentational (Dumb) コンポーネント
|               |-- hoge-item/   # その他のUIコンポーネント
|           |-- hoge.component.ts      # ページのContainer (Smart) コンポーネント
|           |-- hoge.component.html    # コンテナコンポーネントのテンプレート
|           |-- hoge.component.scss    # コンテナコンポーネントのスタイル
|           |-- hoge.signal.ts         # ページ固有の状態管理（Signal）
|           |-- services/        # ページ固有のサービス
|           |-- models/          # ページ固有のモデル
|   |-- models/            # データモデル、インターフェース
|   |-- services/          # グローバルサービス
|   |-- utils/             # ユーティリティ関数
```

## 開発手順と進行計画

1. **設計フェーズ**:
   - ユーザーストーリーと要件の明確化
   - データモデルの設計
   - UIワイヤーフレームの作成
   - コンポーネント構造の設計

2. **開発フェーズ**:
   - コアコンポーネントの実装
   - マップ表示機能の実装
   - 時間選択機能の実装
   - 交通データの視覚化実装
   - モバイルレスポンシブ対応

3. **テストフェーズ**:
   - 単体テストの作成と実行
   - 統合テストの実施
   - パフォーマンステストの実施
   - クロスブラウザテスト

4. **リファクタリングフェーズ**:
   - コード最適化
   - パフォーマンス改善
   - アクセシビリティ対応

5. **ドキュメンテーションフェーズ**:
   - API ドキュメントの作成
   - ユーザーマニュアルの作成
   - コンポーネント仕様書の作成

## セキュリティガイドライン

1. **認証・認可**:
   - 適切な認証メカニズムの実装（必要な場合）
   - RBAC（Role-Based Access Control）の考慮

2. **データセキュリティ**:
   - センシティブデータの最小限の保持
   - LocalStorageの使用制限と適切な暗号化
   - XSS対策の実装

3. **API セキュリティ**:
   - APIキーの安全な管理（環境変数の使用）
   - CORS設定の適切な管理
   - レート制限の実装（バックエンド側）

4. **コードセキュリティ**:
   - 依存パッケージの定期的な更新
   - 既知の脆弱性のスキャンと対応
   - Angular セキュリティベストプラクティスの遵守

## ドキュメンテーションガイドライン

1. **コードコメント**:
   - 複雑なロジックには必ずコメントを付ける
   - パブリックAPI/メソッドにはJSDocコメントを付ける
   - `TODO`コメントには期限または担当者情報を含める

2. **README.md**:
   - プロジェクト概要と目的
   - セットアップと実行手順
   - 主要機能の簡潔な説明
   - 貢献ガイドライン

3. **アーキテクチャドキュメント**:
   - コンポーネント構造図
   - データフロー図
   - 状態管理の方法

4. **API仕様書**:
   - エンドポイント定義（将来的にバックエンド連携時）
   - リクエスト/レスポンス形式
   - エラーハンドリング

## パフォーマンス最適化

1. **ロード時間の最適化**:
   - 遅延ロード（Lazy Loading）の活用
   - コード分割の実装
   - アセット最適化（画像圧縮など）

2. **レンダリング最適化**:
   - 変更検出戦略の最適化
   - 仮想スクロールの使用（大量のデータリスト表示時）
   - メモ化テクニックの活用

3. **ネットワーク最適化**:
   - データキャッシュ戦略の実装
   - HTTP/2の活用
   - プログレッシブロードの実装

## アクセシビリティ対応

1. **WCAG準拠**:
   - 色のコントラスト比の確保
   - キーボードナビゲーションの対応
   - スクリーンリーダー対応

2. **レスポンシブ対応**:
   - モバイルファーストアプローチ
   - タッチ操作の最適化
   - 画面サイズに応じたUI調整

## 将来の拡張性

1. **バックエンド連携**:
   - RESTful APIとの連携準備
   - リアルタイムデータ（WebSocket）対応の準備

2. **機能拡張**:
   - ユーザープロファイルとカスタマイズ機能
   - 交通予測機能の追加
   - ルート計算機能の追加

このドキュメントは開発の進行に伴い更新される可能性があります。変更がある場合は、チームメンバーに通知し、必要に応じてレビューを行ってください。
